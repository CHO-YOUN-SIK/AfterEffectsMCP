# 📘 After Effects MCP 사용자 가이드

After Effects 내에서 AI(Gemini)와 대화하며 스크립트를 자동 생성하고 실행할 수 있는 패널입니다.

## 1. 시작하기 (설치 및 실행)

이 프로젝트는 After Effects의 확장 프로그램(CEP Panel)과 백그라운드 Python 서버로 구성되어 있습니다.

### 사전 준비
1. **Python 3.10 이상**이 설치되어 있어야 합니다.
2. **After Effects**가 설치되어 있어야 합니다.

### 실행 방법
1. **After Effects**를 실행합니다.
2. 상단 메뉴에서 `창(Window)` > `확장명(Extensions)` > `Gemini Assistant`를 클릭합니다.
3. 패널이 열리면 **자동으로 Python 서버가 시작**됩니다.
   - *성공 시:* 채팅창에 "✅ Python 서버가 포트 5000에서 시작되었습니다." 메시지가 뜹니다.
   - *실패 시:* 터미널에서 `server/server.py`를 직접 실행해주세요. (`python server/server.py`)

---

## 2. API 키 설정 (보안 강화됨 🔒)

AI 기능을 사용하려면 구글 Gemini API 키가 필요합니다.

1. [Google AI Studio](https://aistudio.google.com/)에서 API 키를 발급받습니다.
2. 패널 상단의 **"🔑 Gemini API Key"** 섹션을 클릭하여 펼칩니다.
3. API 키를 입력하고 바깥 영역을 클릭하거나 엔터를 칩니다.
4. **"연결 테스트"** 버튼을 눌러 정상 작동을 확인합니다.

> **참고:** 입력한 키는 브라우저 내부 저장소(`localStorage`)에 암호화되어 안전하게 저장됩니다. 파일로 저장되지 않으므로 유출 걱정이 없습니다.

---

## 3. 사용 방법

### 💬 대화하기
- "안녕", "사용법 알려줘" 처럼 자연스럽게 말을 걸어보세요.
- AI가 마크다운 형식으로 깔끔하게 답변해줍니다.

### 🎬 작업 요청하기 (핵심!)
After Effects 작업을 말로 시켜보세요.

**예시 명령:**
- "빨간색 텍스트 레이어 'Hello'를 중앙에 만들어줘"
- "10초짜리 HD 컴포지션 만들어줘"
- "선택한 레이어의 불투명도를 50%로 줄여줘"
- "바운스 애니메이션 효과를 넣어줘"

### ⚙️ 코드 실행 및 취소
1. AI가 요청을 이해하면 작업을 수행할 **ExtendScript 코드**를 생성하여 보여줍니다.
2. **[실행]** 버튼을 누르면 즉시 After Effects에 반영됩니다.
   - 버튼이 "실행 중..."으로 바뀌며 중복 실행을 방지합니다.
3. 마음에 들지 않으면 **Ctrl+Z**로 되돌리거나, **[취소]** 버튼을 누르세요.

---

## 4. 자주 묻는 질문 (FAQ)

**Q. "서버 연결 끊김" 이라고 떠요.**
A. 패널을 닫았다가 다시 열어보세요. 그래도 안 되면 백그라운드에서 `server.py`가 꺼진 것입니다. 터미널을 열어 수동으로 실행해 보세요.

**Q. "Quota Exceeded" 오류가 떠요.**
A. 무료 API 키 사용량을 초과했습니다. 약 1분 뒤에 다시 시도하시거나, 다른 구글 계정의 키를 사용해 보세요.

**Q. 코드가 실행됐는데 아무 반응이 없어요.**
A. 이미 해결되었습니다! 최신 버전은 AI 코드를 변형 없이 그대로 실행하므로, 스크립트 실행 권한만 있다면 즉시 반영됩니다. (편집 > 환경설정 > 스크립팅 및 표현식 > **스크립트의 파일 쓰기 및 네트워크 액세스 허용** 체크 필수)
